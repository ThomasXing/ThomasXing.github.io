webpackJsonp([1],{"2YgE":function(e,t,r){var o=r("Xi++");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r("rjj0")("079cde55",o,!0,{})},"6JRN":function(e,t,r){"use strict";var o=r("Dd8w"),n=r.n(o),i=r("NYxO"),s={computed:n()({},Object(i.b)(["pageNum","pageSize","totalCount"])),methods:{handleSizeChange:function(e){this.$store.dispatch("SET_PAGESIZE",parseInt(e))},handleCurrentChange:function(e){this.$store.dispatch("SET_PAGENUM",parseInt(e))}}},a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination",staticStyle:{padding:"50px 0 20px",width:"100%"}},[r("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,15,30,50],"page-size":e.pageSize,layout:"total,sizes, next, pager,prev",total:e.totalCount,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},l=[],c={render:a,staticRenderFns:l},p=c,m=r("VU/8"),u=m(s,p,!1,null,null,null);t.a=u.exports},DE98:function(e,t,r){var o=r("nP/o");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r("rjj0")("8e73c0bc",o,!0,{})},Fflu:function(e,t,r){"use strict";function o(e){r("VQq/")}var n={name:"op-content-info-frame",props:{height:{type:Number,default:30}},mounted:function(){}},i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"op-content-info-frame"},[e._t("default"),e._v(" "),e._t("rightbar")],2)},s=[],a={render:i,staticRenderFns:s},l=a,c=r("VU/8"),p=o,m=c(n,l,!1,p,null,null);t.a=m.exports},QxXP:function(e,t,r){var o=r("i22b");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r("rjj0")("54a83db1",o,!0,{})},S5u7:function(e,t,r){"use strict";function o(e){var t=e.roleCode,r=e.roleName,o=e.pageNo,n=e.pageSize,i=e.frontEndPortKey;return Object(p.a)({url:"/role/getRolesByPager",method:"get",params:{roleCode:t,roleName:r,pageNo:o,pageSize:n,frontEndPortKey:i}})}function n(e){var t=e.roleCode,r=e.roleName,o=e.description,n=e.extendInfo,i=e.frontEndPortKey,s=e.isBuildIn,a=e.parentId,l=e.roleImage;return Object(p.a)({url:"/role/addRole",method:"post",data:{roleCode:t,roleName:r,description:o,extendInfo:n,frontEndPortKey:i,isBuildIn:s,parentId:a,roleImage:l}})}function i(e){var t=e.roleCode,r=e.roleName,o=e.roleId,n=e.description,i=e.extendInfo,s=e.frontEndPortKey,a=e.isBuildIn,l=e.parentId,c=e.roleImage;return Object(p.a)({url:"/role/updateRole",method:"post",data:{roleCode:t,roleName:r,roleId:o,description:n,extendInfo:i,frontEndPortKey:s,isBuildIn:a,parentId:l,roleImage:c}})}function s(e){return Object(p.a)({url:"/role/removeRole",method:"post",data:{roleId:e}})}function a(e){return Object(p.a)({url:"/role/getPermissionById",method:"get",params:{roleId:e}})}function l(){return Object(p.a)({url:"/role/getAllPermission",method:"get"})}function c(e){var t=e.roleId,r=e.rolePermissionJson;return Object(p.a)({url:"/role/setPermission",method:"post",data:{roleId:t,rolePermissionJson:r}})}t.d=o,t.a=n,t.g=i,t.e=s,t.c=a,t.b=l,t.f=c;var p=r("Vo7i")},TWav:function(e,t,r){"use strict";function o(e){r("2YgE")}var n={name:"op-content-grid-frame",mounted:function(){}},i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"op-content-grid-frame"},[e._t("default")],2)},s=[],a={render:i,staticRenderFns:s},l=a,c=r("VU/8"),p=o,m=c(n,l,!1,p,null,null);t.a=m.exports},TdfM:function(e,t,r){"use strict";function o(e){return{0:"否",1:"是"}[e]}function n(e){r("zbtY")}Object.defineProperty(t,"__esModule",{value:!0});var i=r("mvHQ"),s=r.n(i),a=r("//Fk"),l=r.n(a),c=r("Xxa5"),p=r.n(c),m=r("exGp"),u=r.n(m),d=r("Dd8w"),f=r.n(d),h=r("NYxO"),g=r("S5u7"),b=r("ZocMk"),v=r("yWwWJ"),x=r("Ffluh"),y=r("TWavy"),F=r("k3xQ+"),C=r("6JRNn"),_={name:"op-authority-permission",data:function(){return{increVisible:!1,exportVisble:!1,roleVisible:!1,listLoading:!0,isEdit:!1,totalCount:0,roleForm:{code:"",name:"",describe:"",builtIn:"",extendInfo:"",frontkey:"",image:"",id:""},roleRules:{code:[{required:!0,message:"请输入角色编号",trigger:"blur"}],name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],describe:[{required:!0,message:"请输入权限描述",trigger:"blur"}],builtIn:[{required:!0,message:"请选择是否内置",trigger:"change"}],image:[{required:!0,message:"请输入字符编码",trigger:"blur"}]},permissionForm:{roleName:"",regionId:"",regionName:"",roleId:"",permissionName:"所有",permissionId:"",selectedRegions:[],frontkey:""},query:{name:"",code:"",frontkey:""},datas:[],regionData:[],exportHeader:[],exportFilter:[],regionProps:{label:"name",value:"id",children:"list"},treeData:[],permissionList:[],perprops:{label:"permissionName",children:"subList"}}},created:function(){this.$store.dispatch("Get_CITYLIST"),this.fetchData(),this.getAllPermission()},mounted:function(){},computed:f()({},Object(h.b)(["pageNum","pageSize","cityList"]),{theight:function(){return document.body.offsetHeight-300}}),watch:{pageSize:function(){this.fetchData()},pageNum:function(){this.fetchData()}},filters:{isBuiltInFilter:o},components:{conditionFrame:v.a,infoFrame:x.a,gridFrame:y.a,opBadge:b.a,pagination:C.a,exportExcel:F.a},methods:{fetchData:function(e){var t=this;return u()(p.a.mark(function e(){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.listLoading=!0,t.listQuery={roleCode:t.query.code,roleName:t.query.name,pageNo:t.pageNum,pageSize:t.pageSize,frontEndPortKey:t.query.frontkey},e.next=4,Object(g.d)(t.listQuery);case 4:r=e.sent,r?(t.datas=r.returnObject.list,t.totalCount=r.returnObject.totalCount,t.$store.dispatch("SET_TOTALCOUNT",parseInt(t.totalCount))):(t.datas=[],t.totalCount=0,t.$store.dispatch("SET_TOTALCOUNT",0)),t.listLoading=!1;case 7:case"end":return e.stop()}},e,t)}))()},isEditRole:function(e,t){this.increVisible=!0,this.isEdit=!0,this.roleForm.code=t.roleCode,this.roleForm.name=t.roleName,this.roleForm.describe=t.description,this.roleForm.extendInfo=t.extendInfo,this.roleForm.frontkey=t.frontEndPortKey,this.roleForm.builtIn=t.isBuiltIn+"",this.roleForm.image=t.roleImage,this.roleForm.id=t.id},isAddRole:function(e){this.isEdit&&(this.isEdit=!1,this.roleForm={code:"",name:"",describe:"",builtIn:"",extendInfo:"",frontkey:"",image:""})},addRole:function(e){var t=this;return u()(p.a.mark(function r(){var o,n;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$refs[e].validate();case 2:if(!(o=r.sent)){r.next=19;break}if(t.listQuery={roleCode:t.roleForm.code,roleName:t.roleForm.name,description:t.roleForm.describe,extendInfo:t.roleForm.extendInfo,frontEndPortKey:t.roleForm.frontkey,isBuildIn:t.roleForm.builtIn,parentId:"0",roleImage:t.roleForm.image},n=void 0,!t.isEdit){r.next=13;break}return t.$set(t.listQuery,"roleId",t.roleForm.id),r.next=10,Object(g.g)(t.listQuery);case 10:n=r.sent,r.next=16;break;case 13:return r.next=15,Object(g.a)(t.listQuery);case 15:n=r.sent;case 16:n&&(t.increVisible=!1,t.$message({type:"success",message:n.message}),t.$refs[e].resetFields(),t.fetchData()),r.next=20;break;case 19:return r.abrupt("return",!1);case 20:case"end":return r.stop()}},r,t)}))()},removeUserRole:function(e){var t=this;return u()(p.a.mark(function r(){var o,n;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("是否永久删除该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:if(!(o=r.sent)){r.next=10;break}return r.next=6,Object(g.e)(e.id);case 6:n=r.sent,n&&(t.$message({type:"success",message:"删除成功!"}),t.fetchData()),r.next=11;break;case 10:t.$message({type:"info",message:"已取消删除"});case 11:case"end":return r.stop()}},r,t)}))()},resetForm:function(e){this.$store.dispatch("SET_PAGESIZE",15),this.$store.dispatch("SET_PAGENUM",1),this.$refs[e].resetFields(),this.fetchData()},getExportSize:function(){var e=this;this.$refs.table.$slots.default.forEach(function(t){if(t.componentOptions&&t.componentOptions.propsData.prop){var r=t.componentOptions.propsData;e.exportHeader.push(r.label),e.exportFilter.push(r.prop)}})},getexportList:function(e){var t={roleCode:this.query.code,roleName:this.query.name,pageNo:this.pageNum,pageSize:e,frontEndPortKey:this.query.frontkey};return new l.a(function(e,r){Object(g.d)(t).then(function(t){var r=t.returnObject.list;r.map(function(e){e.isBuiltIn=o(e.isBuiltIn)}),e(r)},function(e){return r(e)})})},setPermission:function(e){this.roleVisible=!0,this.permissionForm.roleName=e.roleName,this.permissionForm.roleId=e.id,this.permissionForm.frontkey=e.frontEndPortKey,this.getPermission(e.id)},getPermission:function(e){var t=this;return u()(p.a.mark(function r(){var o,n;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(g.c)(e);case 2:o=r.sent,n=o.returnObject,n&&n.length&&(t.$refs.tree.setCheckedNodes(n),t.addCheckedRegion(t.treeData,n));case 5:case"end":return r.stop()}},r,t)}))()},addCheckedRegion:function(e,t){var r=this;e.map(function(e){t.map(function(o){e.id===o.id&&(e.regionName=o.regionName,e.scopeObjectId=o.scopeObjectId),e.subList.length>0&&r.addCheckedRegion(e.subList,t)})})},getAllPermission:function(){var e=this;return u()(p.a.mark(function t(){var r,o,n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.b)();case 2:r=t.sent,o=r.returnObject,n=e.metaData(o),e.treeData=n;case 6:case"end":return t.stop()}},t,e)}))()},metaData:function(e,t){var r=this,o=[];return!!e.length&&(e.sort(function(e,t){return e.displayOrder-t.displayOrder}),e.forEach(function(n){var i=n.id,s=n.parentId;n.subList=[],e.map(function(e){var t=e.id,o=e.parentId;i===o&&n.subList.push(e),s===t&&r.$set(e,"hasChild",!0)}),""!==s&&"0"!==s||t?t&&0===n.subList.length&&o.push(n):o.push(n)}),o)},addAllArea:function(){var e=this;if("operate"===this.permissionForm.frontkey||"pg"===this.permissionForm.frontkey){var t=this.permissionForm.permissionName;""===t&&(t="所有"),this.regionData.forEach(function(t,r){""===t.permissionId&&e.regionData.splice(r,1)}),this.regionData.unshift({permissionName:t,permissionId:"",regionId:"000000",regionName:"全国"}),this.rangeCheck(this.permissionForm.permissionId,this.treeData,"全国","000000")}},addPermissionArea:function(e){if("city"===this.permissionForm.frontkey&&this.permissionForm.selectedRegions.length<2)return this.$message({type:"warning",message:"城市端角色必须选择到市区"}),!1;if(("operate"===this.permissionForm.frontkey||"pg"===this.permissionForm.frontkey)&&3===this.permissionForm.selectedRegions.length)return this.$message({type:"warning",message:"运营端角色不能选择到区"}),!1;if(""===this.permissionForm.regionId)return!1;var t={permissionName:this.permissionForm.permissionName,permissionId:this.permissionForm.permissionId,regionId:this.permissionForm.regionId,regionName:this.permissionForm.regionName};this.regionData.length<1||""===this.regionData[0].permissionId&&this.regionData.length<2?(this.regionData.push(t),this.rangeCheck(this.permissionForm.permissionId,this.treeData,this.permissionForm.regionName,this.permissionForm.regionId)):""===this.regionData[0].permissionId&&2!==this.regionData.length||(this.regionData.splice(-1,1,t),this.rangeCheck(this.permissionForm.permissionId,this.treeData,this.permissionForm.regionName,this.permissionForm.regionId))},regionChange:function(e){"city"===this.permissionForm.frontkey&&e.length<2||("operate"!==this.permissionForm.frontkey&&"pg"!==this.permissionForm.frontkey||3!==e.length)&&(this.permissionForm.regionName=this.$refs.cascader.currentLabels.slice(-1)[0],this.permissionForm.regionId=e.slice(-1)[0])},rangeCheck:function(e,t,r,o){var n=this;t.forEach(function(t){t.id===e||t.parentId===e||""===e?(t.regionName=r,t.scopeObjectId=o):n.rangeCheck(e,t.subList,r,o),t.id!==e&&""!==e&&t.parentId!==e||n.rangeCheck(t.id,t.subList,r,o)})},handleDelete:function(e,t){var r=this,o=void 0,n=void 0;this.regionData.forEach(function(e,i){if(t.regionId===e.regionId&&r.regionData.splice(i,1),""===e.permissionId&&(o=e.regionId,n=e.regionName),e.regionId&&""===e.permissionId)return r.rangeCheck(e.permissionId,r.treeData,e.regionName,e.regionId),!1;r.rangeCheck(e.permissionId,r.treeData,n,o)})},handleCheckChange:function(e,t,r){},handleNodeClick:function(e){this.permissionForm.permissionName=e.permissionName,this.permissionForm.permissionId=e.id,this.permissionForm.regionId=e.scopeObjectId||"",this.permissionForm.regionName=e.regionName||"",this.addPermissionArea(!0)},permissionDia:function(){this.regionData=[],this.permissionForm.permissionName="所有",this.permissionForm.frontkey="",this.$refs.tree.setCheckedNodes([]),this.permissionList=[],this.$refs.permissionForm.resetFields("selectedRegions")},setRolePermission:function(){var e=this;return u()(p.a.mark(function t(){var r,o,n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$refs.tree.getCheckedNodes(),e.treeData.length>0&&r.map(function(t){e.permissionList.push({permissionId:t.id,scopeObjectId:t.scopeObjectId})}),o={roleId:e.permissionForm.roleId,rolePermissionJson:s()(e.permissionList)},t.next=5,Object(g.f)(o);case 5:n=t.sent,e.$message({type:"success",message:n.message}),e.permissionList=[];case 8:case"end":return t.stop()}},t,e)}))()}}},k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"op-authority-permission"},[r("condition-frame",{staticClass:"op-query"},[r("el-form",{ref:"query",attrs:{model:e.query,inline:!0,"label-width":"0"}},[r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"sidebar-search",attrs:{type:"code",placeholder:"角色编码","auto-complete":"off"},model:{value:e.query.code,callback:function(t){e.$set(e.query,"code",t)},expression:"query.code"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"name"}},[r("el-input",{staticClass:"sidebar-search",attrs:{type:"name",placeholder:"角色名称","auto-complete":"off"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"frontkey"}},[r("el-select",{staticClass:"sidebar-search",attrs:{placeholder:"请选择-网站端口",clearable:""},model:{value:e.query.frontkey,callback:function(t){e.$set(e.query,"frontkey",t)},expression:"query.frontkey"}},[r("el-option",{attrs:{label:"运营端",value:"operate"}}),e._v(" "),r("el-option",{attrs:{label:"城市端",value:"city"}}),e._v(" "),r("el-option",{attrs:{label:"商停集团版",value:"pg"}}),e._v(" "),r("el-option",{attrs:{label:"商停2.0",value:"parking"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.fetchData}},[e._v("查询")]),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm("query")}}},[e._v("重置")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.increVisible=!0}}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.exportVisble=!e.exportVisble}}},[e._v("导出")])],1)],1)],1),e._v(" "),r("info-frame",[e._v("\n    当前总条数\n    "),r("op-badge",[e._v(e._s(e.totalCount))]),e._v("\n    条\n  ")],1),e._v(" "),r("grid-frame",[[r("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],ref:"table",attrs:{data:e.datas,border:"",height:e.theight,stripe:"","element-loading-text":"拼命加载中","highlight-current-row":"",fit:"","cell-class-name":"h40"}},[r("el-table-column",{attrs:{prop:"roleCode",label:"角色编码",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"280"}}),e._v(" "),r("el-table-column",{attrs:{prop:"description",label:"权限描述","min-width":"600"}}),e._v(" "),r("el-table-column",{attrs:{prop:"extendInfo",label:"扩展信息","min-width":"600"}}),e._v(" "),r("el-table-column",{attrs:{label:"是否内置",prop:"isBuildIn"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("isBuiltInFilter")(t.row.isBuiltIn))+"\n          ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"frontEndPortKey",label:"前端口端"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.isEditRole("roleForm",t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.setPermission(t.row)}}},[e._v("设置权限")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.removeUserRole(t.row)}}},[e._v("删除")])]}}])})],1)],e._v(" "),r("pagination")],2),e._v(" "),r("exportExcel",{attrs:{exportHeader:e.exportHeader,exportFilter:e.exportFilter,getexportList:e.getexportList,dialogVisble:e.exportVisble},on:{"update:dialogVisble":function(t){e.exportVisble=t},getExportSize:e.getExportSize}}),e._v(" "),r("el-dialog",{staticClass:"w800",attrs:{title:"保存角色",visible:e.increVisible,width:"42%"},on:{"update:visible":function(t){e.increVisible=t},close:function(t){e.isAddRole("roleForm")}}},[r("el-form",{ref:"roleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.roleForm,rules:e.roleRules,"label-width":"160px"}},[r("el-form-item",{attrs:{label:"角色编码",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入角色编号"},model:{value:e.roleForm.code,callback:function(t){e.$set(e.roleForm,"code",t)},expression:"roleForm.code"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否内置",prop:"builtIn"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.roleForm.builtIn,callback:function(t){e.$set(e.roleForm,"builtIn",t)},expression:"roleForm.builtIn"}},[r("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"网站端口",prop:"frontkey"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.roleForm.frontkey,callback:function(t){e.$set(e.roleForm,"frontkey",t)},expression:"roleForm.frontkey"}},[r("el-option",{attrs:{label:"运营端",value:"operate"}}),e._v(" "),r("el-option",{attrs:{label:"城市端",value:"city"}}),e._v(" "),r("el-option",{attrs:{label:"商停集团版",value:"pg"}}),e._v(" "),r("el-option",{attrs:{label:"商停2.0",value:"parking"}})],1)],1),e._v(" "),r("el-form-item",{staticClass:"inline_textarea",attrs:{label:"角色描述",prop:"describe"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.roleForm.describe,callback:function(t){e.$set(e.roleForm,"describe",t)},expression:"roleForm.describe"}})],1),e._v(" "),r("el-form-item",{staticClass:"inline_textarea",attrs:{label:"扩展信息",prop:"extendInfo"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.roleForm.extendInfo,callback:function(t){e.$set(e.roleForm,"extendInfo",t)},expression:"roleForm.extendInfo"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"字符图标",prop:"image"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入","auto-complete":"off"},model:{value:e.roleForm.image,callback:function(t){e.$set(e.roleForm,"image",t)},expression:"roleForm.image"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.increVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addRole("roleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{staticClass:"w800",attrs:{title:"设置角色权限",visible:e.roleVisible,width:"42%"},on:{"update:visible":function(t){e.roleVisible=t},close:e.permissionDia}},[r("el-form",{ref:"permissionForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.permissionForm,"label-width":"160px"}},[r("el-form-item",{attrs:{label:"角色",prop:"roleName"}},[r("el-input",{attrs:{type:"size",placeholder:"请输入",disabled:""},model:{value:e.permissionForm.roleName,callback:function(t){e.$set(e.permissionForm,"roleName",t)},expression:"permissionForm.roleName"}})],1),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"选中缺省城区",prop:"selectedRegions"}},[r("el-cascader",{ref:"cascader",attrs:{options:e.cityList,props:e.regionProps,"change-on-select":""},on:{change:e.regionChange},model:{value:e.permissionForm.selectedRegions,callback:function(t){e.$set(e.permissionForm,"selectedRegions",t)},expression:"permissionForm.selectedRegions"}}),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:e.addPermissionArea}},[e._v("添加城区")]),e._v(" "),"city"!==e.permissionForm.frontkey?r("el-button",{attrs:{type:"text"},on:{"~click":function(t){e.addAllArea(t)}}},[e._v("添加全国")]):e._e()],1),e._v(" "),e.regionData.length>0?r("el-form-item",{staticClass:"inline_textarea",attrs:{label:"已选省市区"}},[r("el-table",{staticClass:"diaTable",staticStyle:{width:"100%"},attrs:{data:e.regionData,border:"",clearable:"","cell-class-name":"h40"}},[r("el-table-column",{attrs:{prop:"permissionName",label:"平台名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"regionId",label:"城区ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"regionName",label:"城区名称"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1):e._e(),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"权限"}},[r("el-tree",{ref:"tree",attrs:{props:e.perprops,data:e.treeData,"node-key":"id","show-checkbox":"","highlight-current":"","check-strictly":!0},on:{"check-change":e.handleCheckChange,"node-click":e.handleNodeClick}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.roleVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.setRolePermission("permissionForm")}}},[e._v("确 定")])],1)],1)],1)},I=[],A={render:k,staticRenderFns:I},E=A,N=r("VU/8"),w=n,D=N(_,E,!1,w,null,null);t.default=D.exports},"VQq/":function(e,t,r){var o=r("j+Xp");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r("rjj0")("fb258244",o,!0,{})},"Xi++":function(e,t,r){t=e.exports=r("FZ+f")(!0),t.push([e.i,"\n.op-content-grid-frame {\n  margin-top: 5px;\n}\n","",{version:3,sources:["/Users/thomasxing/workspace/op-web/src/components/base/gridFrame.vue"],names:[],mappings:";AACA;EACE,gBAAgB;CACjB",file:"gridFrame.vue",sourcesContent:["\n.op-content-grid-frame {\n  margin-top: 5px;\n}\n"],sourceRoot:""}])},ZocM:function(e,t,r){"use strict";function o(e){r("QxXP")}var n={name:"op-badge"},i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"op-bedge"},[e._t("default")],2)},s=[],a={render:i,staticRenderFns:s},l=a,c=r("VU/8"),p=o,m=c(n,l,!1,p,null,null);t.a=m.exports},dv0e:function(e,t,r){t=e.exports=r("FZ+f")(!0),t.push([e.i,"\n.op-authority-permission {\n  width: 100%;\n  height: 100%;\n}\n.op-authority-permission .op-query {\n  padding: 10px 0;\n  border-bottom: 1px dashed #d4d4d4;\n  margin-bottom: 10px;\n}\n.op-authority-permission .inline_textarea {\n  width: 100%;\n}\n.op-authority-permission .inline_textarea .el-form-item__content {\n  width: 76%;\n}\n","",{version:3,sources:["/Users/thomasxing/workspace/op-web/src/components/authority/permissions/role.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,aAAa;CACd;AACD;EACE,gBAAgB;EAChB,kCAAkC;EAClC,oBAAoB;CACrB;AACD;EACE,YAAY;CACb;AACD;EACE,WAAW;CACZ",file:"role.vue",sourcesContent:["\n.op-authority-permission {\n  width: 100%;\n  height: 100%;\n}\n.op-authority-permission .op-query {\n  padding: 10px 0;\n  border-bottom: 1px dashed #d4d4d4;\n  margin-bottom: 10px;\n}\n.op-authority-permission .inline_textarea {\n  width: 100%;\n}\n.op-authority-permission .inline_textarea .el-form-item__content {\n  width: 76%;\n}\n"],sourceRoot:""}])},i22b:function(e,t,r){t=e.exports=r("FZ+f")(!0),t.push([e.i,"\n.op-bedge {\n  padding: 2px 3px;\n  background: #64C3DF;\n  border-radius: 5px;\n  color: #FFF;\n  margin: 0 3px;\n}\n","",{version:3,sources:["/Users/thomasxing/workspace/op-web/src/components/base/opBadge.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,oBAAoB;EACpB,mBAAmB;EACnB,YAAY;EACZ,cAAc;CACf",file:"opBadge.vue",sourcesContent:["\n.op-bedge {\n  padding: 2px 3px;\n  background: #64C3DF;\n  border-radius: 5px;\n  color: #FFF;\n  margin: 0 3px;\n}\n"],sourceRoot:""}])},"j+Xp":function(e,t,r){t=e.exports=r("FZ+f")(!0),t.push([e.i,"\n.op-content-info-frame {\n  background: #F5F5F5;\n  font-size: 14px;\n  padding: 10px 0 10px 10px;\n}\n","",{version:3,sources:["/Users/thomasxing/workspace/op-web/src/components/base/infoFrame.vue"],names:[],mappings:";AACA;EACE,oBAAoB;EACpB,gBAAgB;EAChB,0BAA0B;CAC3B",file:"infoFrame.vue",sourcesContent:["\n.op-content-info-frame {\n  background: #F5F5F5;\n  font-size: 14px;\n  padding: 10px 0 10px 10px;\n}\n"],sourceRoot:""}])},k3xQ:function(e,t,r){"use strict";var o=r("Xxa5"),n=r.n(o),i=r("exGp"),s=r.n(i),a={name:"doexport",data:function(){return{exportVisible:!1,downloadLoading:!1,exportForm:{size:0},exportList:[],rules:[{required:!0,message:"导出数不能为空"},{type:"number",message:"导出条数必须为数字值"}]}},props:{getexportList:{type:Function,default:function(){return[]}},exportHeader:{type:Array,default:[]},exportFilter:{type:Array,default:[]},dialogVisble:{type:Boolean,default:!1}},watch:{dialogVisble:function(){this.exportVisible=!this.exportVisible}},methods:{handleDownload:function(){var e=this;this.downloadLoading=!0,r.e(19).then(function(){var t=r("d1pG"),o=t.export_json_to_excel,n=e.exportHeader,i=e.exportFilter,s=e.exportList;o(n,e.formatJson(i,s),"列表excel"),e.downloadLoading=!1}.bind(null,r)).catch(r.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},submitForm:function(e){var t=this;return s()(n.a.mark(function r(){var o,i;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$refs[e].validate();case 2:if(!(o=r.sent)){r.next=13;break}return t.exportVisible=!1,t.getExportSize(),r.next=8,t.getexportList(t.exportForm.size);case 8:i=r.sent,t.exportList=i,t.handleDownload(),r.next=14;break;case 13:return r.abrupt("return",!1);case 14:case"end":return r.stop()}},r,t)}))()},getExportSize:function(){this.$emit("getExportSize")}}},l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"doexport"},[r("el-dialog",{attrs:{title:"导出选项",visible:e.exportVisible,width:"30%"},on:{"update:visible":function(t){e.exportVisible=t}}},[[r("el-form",{ref:"exportForm",staticClass:"demo-ruleForm",attrs:{model:e.exportForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"导出条数",prop:"size",rules:e.rules}},[r("el-input",{attrs:{type:"size","auto-complete":"off"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submitForm("exportForm")}},model:{value:e.exportForm.size,callback:function(t){e.$set(e.exportForm,"size",e._n(t))},expression:"exportForm.size"}})],1)],1)],e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("exportForm")}}},[e._v("确认导出")])],1)],2)],1)},c=[],p={render:l,staticRenderFns:c},m=p,u=r("VU/8"),d=u(a,m,!1,null,null,null);t.a=d.exports},mvHQ:function(e,t,r){e.exports={default:r("qkKv"),__esModule:!0}},"nP/o":function(e,t,r){t=e.exports=r("FZ+f")(!0),t.push([e.i,"\n.op-content-condition-frame {\n  padding: 10px 0;\n}\n","",{version:3,sources:["/Users/thomasxing/workspace/op-web/src/components/base/conditionFrame.vue"],names:[],mappings:";AACA;EACE,gBAAgB;CACjB",file:"conditionFrame.vue",sourcesContent:["\n.op-content-condition-frame {\n  padding: 10px 0;\n}\n"],sourceRoot:""}])},qkKv:function(e,t,r){var o=r("FeBl"),n=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},yWwW:function(e,t,r){"use strict";function o(e){r("DE98")}var n={name:"op-content-condition-frame",props:{height:{type:Number,default:30}}},i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"op-content-condition-frame"},[e._t("default")],2)},s=[],a={render:i,staticRenderFns:s},l=a,c=r("VU/8"),p=o,m=c(n,l,!1,p,null,null);t.a=m.exports},zbtY:function(e,t,r){var o=r("dv0e");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r("rjj0")("7be25a9e",o,!0,{})}});
//# sourceMappingURL=1.7e8ef2064f052a0f842a.js.map